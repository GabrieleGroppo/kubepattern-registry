{
    "version": "kubepattern.it/v1",
    "kind": "Pattern",
    "metadata": {
        "name": "resource-quotas-predictable-demands",
        "displayName": "Resource Quotas Predictable Demands",
        "patternType": "FOUNDATIONAL",
        "severity": "WARNING",
        "category": "architecture",
        "gitUrl": "https://github.com/GabrieleGroppo/kubepattern-registry/tree/main/doc/resource-quotas-predictable-demands.json",
        "docUrl": "https://github.com/GabrieleGroppo/kubepattern-registry/tree/test/doc/place-holder.md",
        "description": "Identifies Namespaces that lack of explicit resource quotas. Setting resource quotas for such namespaces is crucial to prevent resource contention, ensure fair resource allocation, and maintain cluster stability. This pattern helps in identifying namespaces that could benefit from defined resource quotas to enhance overall cluster performance and reliability."
    
    },
    "spec": {
        "message": "Namespace {{single-namespace.name}} does not have common resource quotas defined.",
        "topology": "SINGLE",
        "resources": [
            {
                "resource": "Namespace",
                "id": "single-namespace",
                "leader": true,
                "filters": {
                    "matchNone": [
                        {
                            "key": ".metadata.name",
                            "operator": "EQUALS",
                            "values": [
                                "kube-system",
                                "kube-public",
                                "kube-node-lease",
                                "krateo-system"
                            ]
                        }
                    ]
                }
            },
            {
                "resource": "ResourceQuota",
                "id": "resource-quota-in-namespace",
                "filters": {
                    "matchNone": [
                        {
                            "key": ".metadata.namespace",
                            "operator": "EQUALS",
                            "values": [
                                "kube-system",
                                "kube-public",
                                "kube-node-lease",
                                "krateo-system"
                            ]
                        }
                    ]
                }
            }
        ],
        "relationships": [
            {
                "id": "resource-quota-in-namespace",
                "type": "IS_NAMESPACE_OF",
                "description": "Links Namespace '{{single-namespace.name}}' with ResourceQuota in the same namespace.",
                "weight": 1,
                "required": true,
                "shared": false,
                "resourceIds": [
                    "single-namespace",
                    "resource-quota-in-namespace"
                ]
            }
        ],
        "actors": [
            "single-namespace"
        ]
    }
}
